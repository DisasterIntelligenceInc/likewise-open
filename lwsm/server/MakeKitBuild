make()
{
    COMMON_HEADERDEPS="reg/lwreg.h lwadvapi.h lwmsg/lwmsg.h lwio/lwio.h lw/base.h lwnet.h"
    SERVER_SOURCES="\
        table.c \
        api.c \
        dispatch.c \
        registry.c \
        bootstrap.c \
        logger.c \
        main.c \
        executable.c \
        driver.c \
        svcm.c \
        stub.c"

    mk_program \
        PROGRAM=lwsmd \
        SOURCES="$SERVER_SOURCES" \
        INCLUDEDIRS=". ../include" \
        HEADERDEPS="$COMMON_HEADERDEPS" \
        LIBDEPS="\
            lwsmcommon lwmsg lwmsg_nothr lwioclient lwnetclientapi \
            regclient lwadvapi lwadvapi_nothr lwbase lwbase_nothr $LIB_PTHREAD" \
        INSTALLDIR="${MK_SBINDIR}"
}
